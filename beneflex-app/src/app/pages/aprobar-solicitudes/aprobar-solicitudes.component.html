<div class="approval-page">
  <!-- Si existe una solicitud actual, muestra tarjeta; si no, muestra emptyState -->
  <div class="card" *ngIf="current as req; else emptyState">
    <!-- Ãcono del beneficio -->
    <div class="benefit-icon-wrap">
      <img
        *ngIf="iconSrcFor(req.benefitName) as src; else fallbackIcon"
        class="benefit-icon"
        [src]="src"
        [alt]="req.benefitName"
      />
      <ng-template #fallbackIcon>ðŸ“Œ</ng-template>
    </div>

    <!-- NavegaciÃ³n -->
    <button
      class="nav nav-left"
      (click)="prev()"
      [disabled]="isFirst || cargando"
      aria-label="Anterior"
    >
      â€¹
    </button>

    <button
      class="nav nav-right"
      (click)="next()"
      [disabled]="isLast || cargando"
      aria-label="Siguiente"
    >
      â€º
    </button>

    <!-- TÃ­tulo -->
    <h2 class="title">Solicitud de beneficio - {{ req.employeeName }}</h2>

    <div class="section-title">Detalles de la solicitud</div>

    <!-- Detalles -->
    <div class="details">
      <p><strong>Solicitante:</strong> {{ req.employeeName }}</p>
      <p><strong>Beneficio:</strong> {{ req.benefitName }}</p>
      <p><strong>Fecha/Desde:</strong> {{ req.startDateUI }}</p>
      <p><strong>DÃ­as:</strong> {{ req.requestedDays ?? 'â€”' }}</p>
      <p><strong>Estado:</strong> {{ req.status }}</p>
    </div>

    <!-- Comentario -->
    <textarea
      class="comment"
      [(ngModel)]="comentario"
      [disabled]="cargando"
      placeholder="Escriba comentarios u observaciones (Opcional)"
      rows="4"
    ></textarea>

    <!-- Acciones -->
    <div class="actions">
      <button
        class="btn approve"
        (click)="openConfirm('APROBADO')"
        [disabled]="cargando"
      >
        Aprobar
      </button>

      <button
        class="btn reject"
        (click)="openConfirm('RECHAZADO')"
        [disabled]="cargando"
      >
        Rechazar
      </button>
    </div>

    <!-- Contador -->
    <div class="counter">{{ currentIndex + 1 }} / {{ total }}</div>
  </div>

  <!-- Estado vacÃ­o -->
  <ng-template #emptyState>
    <div class="card empty">
      <h2 class="title">Aprobaciones</h2>

      <ng-container *ngIf="cargando; else noPendientes">
        <p>Cargando pendientesâ€¦</p>
      </ng-container>

      <ng-template #noPendientes>
        <p>No hay solicitudes pendientes.</p>
      </ng-template>

      <button
        class="btn refresh"
        (click)="cargarPendientes()"
        [disabled]="cargando"
      >
        Recargar
      </button>
    </div>
  </ng-template>

  <!-- Modal confirmaciÃ³n -->
  <div class="confirm-overlay" *ngIf="confirmVisible">
    <div class="confirm-modal">
      <h3>ConfirmaciÃ³n</h3>
      <p>{{ confirmText }}</p>

      <div class="confirm-actions">
        <button
          class="btn cancel"
          (click)="closeConfirm()"
          [disabled]="cargando"
        >
          No
        </button>

        <button
          class="btn ok"
          (click)="confirmYes()"
          [disabled]="cargando"
        >
          SÃ­
        </button>
      </div>
    </div>
  </div>
</div>
